// multilayer perceptron
hgp_main( y => x )
{
	cell layer( y => dim_y, x )
	{
        w = adapt : rand : ( [ dim_y ][ dimof( x ) ]# );
        b = adapt        : ( [ dim_y ]0 );
        q = b + w ** x;
        y = if ( dim_y == 1 ) then tanh( q ) else exp( q );
    };

//    cell mid_layer = tanh : layer;
//    cell out_layer = tanh : layer( 1 );
//    y = layer( 1 ) : layer( 10, x );
    m = layer( 9 ) : layer( 99 ) : layer( 999, x );
    y = layer( 1, m );
};

